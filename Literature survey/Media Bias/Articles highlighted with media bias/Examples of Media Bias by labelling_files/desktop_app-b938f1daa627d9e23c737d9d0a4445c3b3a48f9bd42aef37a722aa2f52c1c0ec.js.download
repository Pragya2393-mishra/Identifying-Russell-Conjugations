(function(){var e,t,n,r,i,o,a,s,u,l,c,d,h,f,p,m;d=function(e){var t,n;t=["PADLET.COM","PADLET.ORG","PADLET.TEST","XIP.IO","LOCALTUNNEL.ME"];for(n in t)if(e.toUpperCase().includes(t[n]))return!0;return!1},t=function(e){var t;return t=0,chrome.browsingData.remove({since:t},{appcache:!0,cache:!0,cookies:!0,downloads:!0,fileSystems:!0,formData:!0,history:!0,indexedDB:!0,localStorage:!0,pluginData:!0,passwords:!0,webSQL:!0},e)},f=function(e,t,n){return document.addEventListener("click",function(r){var i;if(r.currentTarget&&r.currentTarget.activeElement&&"A"===r.currentTarget.activeElement.tagName){if(i=r.currentTarget.activeElement,!i.dataset.appTarget)return r.preventDefault(),i.baseURI.toUpperCase().includes("/AUTH/")||i.href.toUpperCase().includes("/AUTH/")?e(i.href):n(i.href);switch(r.preventDefault(),i.dataset.appTarget){case"none":break;case"self":return e(i.href);case"blank":return t(i.href);case"browser":return n(i.href)}}})},h=function(e){document.firstElementChild.classList+=" desktopapp",e&&(document.firstElementChild.classList+=" "+e)},e=function(){var e,t,n;return e=require("nw-autoupdater"),t=require(process.cwd()+"/package.json"),n=new e(t,{strategy:"AppSwap",backupDir:nw.App.dataPath+"/backup",updateDir:nw.App.dataPath+"/update",logPath:nw.App.dataPath+"/log"}),console.log("check"),this.manifest={},this.needsUpdate=!1,n.readRemoteManifest().then(function(e){return this.manifest=e,n.checkNewVersion(this.manifest)}).then(function(e){var t;return this.needsUpdate=e,this.needsUpdate?confirm(this.manifest.prompt_update_string)?(n.on("download",function(e,t){output.innerHTML=this.manifest.downloading_string+"...",console.log("download progress",Math.floor(e/t*100),"%")}),n.on("install",function(e,t){output.innerHTML=this.manifest.installing_string+"...",console.log("install progress",Math.floor(e/t*100),"%")}),t=n.download(this.manifest).then(function(e){if(n.unpack(e),window.$desktopApp.checkForUpdateMenuItem.label="Restart to Update Padlet",window.$desktopApp.checkForUpdateMenuItem.click=function(){return n.swap()},confirm(this.manifest.ready_string+"..."))return n.swap()})):void 0:void alert(this.manifest.up_to_date_string)})["catch"](function(e){return console.error(e)}),returnf},p=function(e){var t,n,r;t=chrome.app.window.getAll();for(n in t)if(r=t[n].contentWindow.location.href,e===r)return t[n].focus(),!1;return!0},r=function(e){var t,n,r,i,o,a,s,u;a=-1,s=-1,i=chrome.app.window.current()||chrome.app.window.getAll()[0],n=chrome.app.window.getAll(),t=[],i&&(a=(i.x||i.innerBounds.left)+20,s=(i.y||i.innerBounds.top)+20);for(o in n)u=n[o],u&&t.push({x:u.innerBounds.left,y:u.innerBounds.top});t.sort(function(e,t){return e.x<t.x?-1:e.x>t.x?1:0});for(o in t)r=t[o],a===r.x&&console.log("increase"),a=a===r.x?r.x+20:a,s=s===r.y?r.y+20:s;return a=a===-1?null:a,s=s===-1?null:s,e({x:a,y:s})},o=function(e){var t;return decodeURIComponent(null!=(t=RegExp(""+e+"[^;]+").exec(document.cookie))?t.toString().replace(/^[^=]+./,""):void 0)},a=function(e){var t,n,r,i,o,a;return o=-.15,a=o<0?0:255,i=o<0?o*-1:o,r=e[0],n=e[1],t=e[2],[Math.round((a-r)*i)+r,Math.round((a-n)*i)+n,Math.round((a-t)*i)+t]},n=function(e){var t;return t=e.toString(16),1===t.length?"0"+t:t},m=function(e){return"#"+n(e[0])+n(e[1])+n(e[2])},i=function(e){var t;return t={color:"#ebebeb",inactiveColor:"#f8f8f8"},new Promise(function(n){var r;return r=new URL(e),fetch(r.origin+"/walls/address:"+r.pathname.slice(1)).then(function(e){return e.json()}).then(function(e){return n({color:m(a(e.background.dominant_color)),inactiveColor:m(e.background.dominant_color)})})["catch"](function(){return n(t)})})},u=function(){return window.alert},l=function(){return window.confirm},c=function(){return window.prompt},(s=function(){window.require=window.require||function(e){return console.log("Cannot load"+e+". The page should be loaded in NWJS app or some node environment"),function(){function e(){}return e}()},window.process=window.process||{cwd:function(){}},window.nw=window.nw||{App:{}},window.alert=u(),window.confirm=l(),window.prompt=c(),window.$desktopApp={},window.addEventListener("load",function(){var e,t,n,a,s,u,l,c,d;"undefined"!=typeof chrome&&null!==chrome&&null!=(c=chrome.runtime)&&c.sendMessage({status:"loaded"}),"undefined"!=typeof chrome&&null!==chrome&&null!=(d=chrome.runtime)&&d.onMessage.addListener(function(e){if(e.command){if("setMenu"===e.command)return nw.Window.get().menu=e.menu;if("actualSize"===e.command)return nw.Window.get().zoomLevel=0;if("zoomIn"===e.command)return nw.Window.get().zoomLevel++;if("zoomOut"===e.command)return nw.Window.get().zoomLevel--;if("fullScreen"===e.command)return nw.Window.get().toggleFullscreen()}}),"undefined"!=typeof Windows&&(e=function(e,t){return window.open(e,t||"_top")},l=function(e){return window.open(e,"_blank")},u=function(e){return Windows.System.Launcher.launchUriAsync(new Windows.Foundation.Uri(e))},f(e,l,u),h()),t=!1,s=!1,a=!1,n=o("ww_da"),n&&"undefined"!==n?(t=!0,s="nwjs"===n,a="other"===n):(t=ww&&ww.device&&ww.device.desktopApp,t||(t=document.documentElement.dataset.variant&&document.documentElement.dataset.variant.includes("desktopapp")),a=ww&&ww.device&&ww.device.electron,a||(a=document.documentElement.dataset.variant&&document.documentElement.dataset.variant.includes("electron")),s=ww&&ww.device&&ww.device.nwjs,s||(s=document.documentElement.dataset.variant&&document.documentElement.dataset.variant.includes("nwjs"))),t&&(s?(h("nwjs"),e=function(e,t){if(t&&"_top"!==t||(window.location.href=e),"_blank"===t)return nw.Window.open(e)},l=function(e){if(p(e))return i(e).then(function(t){return r(function(n){var r,i;r={width:1280,height:800,minWidth:400,minHeight:200,left:n.x,top:n.y},i={innerBounds:r,frame:{type:"chrome",color:t.color,inactiveColor:t.inactiveColor}},chrome.app.window.create(e,i)})})},u=function(e){return nw.Shell.openExternal(e)},f(e,l,u)):a&&(e=function(e,t){if(t&&"_top"!==t||window.__macAppMsgCenter.bridge.navigate(e),"_blank"===t)return window.__macAppMsgCenter.bridge.openNewWindowInApp(e)},l=function(e){return window.__macAppMsgCenter.bridge.openNewWindowInApp(e)},u=function(e){return window.__macAppMsgCenter.bridge.openInBrowser(e)},f(e,l,u)))})})()}).call(this),function(){}.call(this);